<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡å‹é…ç½® - å›¾åƒè¯†åˆ«å¤§è¯¾è®¾</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background-color: #f8f9fa;
        }
        .section-title {
            margin-bottom: 30px;
            color: #343a40;
            font-weight: 600;
        }
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 25px;
        }
        .form-label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 8px;
            display: block;
        }
        .btn-primary {
            background-color: #667eea;
            border-color: #667eea;
        }
        .btn-primary:hover {
            background-color: #5a67d8;
            border-color: #5a67d8;
        }
        .model-option {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .model-option:hover {
            background-color: #f8f9fa;
        }
        .model-option.selected {
            border-color: #667eea;
            background-color: #e3f2fd;
        }
        .model-description {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 10px;
        }
        .model-details {
            margin-top: 15px;
            font-size: 0.85rem;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
        }
        .param-help {
            cursor: help;
            margin-left: 5px;
            color: #6c757d;
        }
        .form-range {
            margin-bottom: 15px;
        }
        .range-value {
            font-weight: 600;
            color: #667eea;
            min-width: 80px;
            text-align: center;
        }
        .alert-info {
            background-color: #e3f2fd;
            border-color: #bbdefb;
            color: #1565c0;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">å›¾åƒè¯†åˆ«å¤§è¯¾è®¾</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/">é¦–é¡µ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/prepare_data">æ•°æ®å‡†å¤‡</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="/config">æ¨¡å‹é…ç½®</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/train">æ¨¡å‹è®­ç»ƒ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/results">è®­ç»ƒç»“æœ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/predict">å›¾åƒé¢„æµ‹</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <h1 class="section-title">æ¨¡å‹é…ç½®</h1>
        
        <div class="alert alert-info">
            <strong>ğŸ’¡ æç¤ºï¼š</strong> åˆç†çš„å‚æ•°é…ç½®å¯¹äºæ¨¡å‹æ€§èƒ½è‡³å…³é‡è¦ã€‚åˆå­¦è€…å¯ä»¥ä½¿ç”¨é»˜è®¤å‚æ•°å¼€å§‹ï¼Œç„¶åé€æ­¥è°ƒæ•´ä»¥è·å¾—æ›´å¥½çš„ç»“æœã€‚
        </div>
        
        <form action="/config" method="post">
            <!-- æ¨¡å‹ç±»å‹é€‰æ‹© -->
            <div class="card">
                <div class="card-body">
                    <h3>é€‰æ‹©æ¨¡å‹ç±»å‹</h3>
                    <p>æˆ‘ä»¬æä¾›ä¸‰ç§ä¸åŒå¤æ‚åº¦çš„å·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œè¯·æ ¹æ®æ‚¨çš„éœ€æ±‚å’Œç¡¬ä»¶æ¡ä»¶é€‰æ‹©åˆé€‚çš„æ¨¡å‹ã€‚</p>
                    
                    <div class="row mt-4">
                        <div class="col-md-4">
                            <div class="p-4 rounded model-option selected" onclick="selectModel('simple')">
                                <input type="radio" id="model-simple" name="model_type" value="simple" checked style="display: none;">
                                <h4>ğŸ“± ç®€å•CNN</h4>
                                <div class="model-description">
                                    é€‚åˆåˆå­¦è€…å’Œèµ„æºæœ‰é™çš„ç¯å¢ƒ
                                </div>
                                <div class="model-details">
                                    <strong>ç»“æ„ï¼š</strong> 2ä¸ªå·ç§¯å±‚ + 2ä¸ªå…¨è¿æ¥å±‚<br>
                                    <strong>å‚æ•°é‡ï¼š</strong> çº¦1280ä¸‡<br>
                                    <strong>è®­ç»ƒé€Ÿåº¦ï¼š</strong> å¿«<br>
                                    <strong>é€‚åˆï¼š</strong> ç®€å•åˆ†ç±»ä»»åŠ¡
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="p-4 rounded model-option" onclick="selectModel('improved')">
                                <input type="radio" id="model-improved" name="model_type" value="improved" style="display: none;">
                                <h4>ğŸ“Š æ”¹è¿›CNN</h4>
                                <div class="model-description">
                                    å¹³è¡¡æ€§èƒ½å’Œå¤æ‚åº¦çš„é€‰æ‹©
                                </div>
                                <div class="model-details">
                                    <strong>ç»“æ„ï¼š</strong> 4ä¸ªå·ç§¯å±‚ + 3ä¸ªå…¨è¿æ¥å±‚<br>
                                    <strong>å‚æ•°é‡ï¼š</strong> çº¦3240ä¸‡<br>
                                    <strong>è®­ç»ƒé€Ÿåº¦ï¼š</strong> ä¸­ç­‰<br>
                                    <strong>é€‚åˆï¼š</strong> å¤§å¤šæ•°åˆ†ç±»ä»»åŠ¡
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="p-4 rounded model-option" onclick="selectModel('advanced')">
                                <input type="radio" id="model-advanced" name="model_type" value="advanced" style="display: none;">
                                <h4>ğŸš€ é«˜çº§CNN</h4>
                                <div class="model-description">
                                    åŸºäºResNetæ¶æ„ï¼Œæ€§èƒ½æ›´å¼º
                                </div>
                                <div class="model-details">
                                    <strong>ç»“æ„ï¼š</strong> æ®‹å·®å—ç»“æ„ï¼Œæ›´å¤šå·ç§¯å±‚<br>
                                    <strong>å‚æ•°é‡ï¼š</strong> çº¦1120ä¸‡<br>
                                    <strong>è®­ç»ƒé€Ÿåº¦ï¼š</strong> è¾ƒæ…¢<br>
                                    <strong>é€‚åˆï¼š</strong> å¤æ‚åˆ†ç±»ä»»åŠ¡
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æ•°æ®å¢å¼ºè®¾ç½®ï¼ˆç§»åŠ¨åˆ°è¡¨å•å†…ï¼‰ -->
            <div class="card mt-4">
                <div class="card-body">
                    <h3>æ•°æ®å¢å¼ºè®¾ç½®</h3>
                    <div class="form-group">
                        <label class="form-label">ç°åº¦å¢å¼ºï¼ˆRandomGrayscaleï¼‰</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="enable_random_grayscale" name="enable_random_grayscale" checked>
                            <label class="form-check-label" for="enable_random_grayscale">å¯ç”¨ç°åº¦å¢å¼º</label>
                        </div>
                        <label class="form-label mt-2">ç°åº¦å¢å¼ºæ¦‚ç‡ p</label>
                        <div class="input-group">
                            <input type="range" class="form-range" id="random_grayscale_p_range" min="0" max="1" step="0.05" value="0.2" oninput="updateRangeValue('random_grayscale_p', this.value)">
                            <div class="range-value" id="random_grayscale_p_value">0.2</div>
                        </div>
                        <input type="hidden" id="random_grayscale_p" name="random_grayscale_p" value="0.2">
                        <div class="model-description mt-2">å°† RGB å›¾åƒä»¥æ¦‚ç‡ p è½¬ä¸ºç°åº¦ï¼Œæå‡åœ¨ä½å½©è‰²/å¼±å…‰åœºæ™¯çš„é²æ£’æ€§ã€‚</div>
                    </div>
                </div>
            </div>
            
            <!-- è®­ç»ƒå‚æ•°è®¾ç½® -->
            <div class="card mt-4">
                <div class="card-body">
                    <h3>è®­ç»ƒå‚æ•°è®¾ç½®</h3>
                    
                    <div class="form-group">
                        <label for="batch_size" class="form-label">
                            æ‰¹æ¬¡å¤§å° (Batch Size)
                            <span class="param-help" title="æ‰¹æ¬¡å¤§å°å†³å®šæ¯æ¬¡è¿­ä»£ä¸­å¤„ç†çš„æ ·æœ¬æ•°é‡ã€‚è¾ƒå¤§çš„æ‰¹æ¬¡å¯ä»¥åˆ©ç”¨GPUå¹¶è¡Œè®¡ç®—ï¼Œä½†éœ€è¦æ›´å¤šå†…å­˜ã€‚">â“</span>
                        </label>
                        <div class="input-group">
                            <input type="range" class="form-range" id="batch_size_range" min="16" max="128" step="16" value="32" oninput="updateRangeValue('batch_size', this.value)">
                            <div class="range-value" id="batch_size_value">32</div>
                        </div>
                        <input type="hidden" id="batch_size" name="batch_size" value="32">
                    </div>
                    
                    <div class="form-group">
                        <label for="learning_rate" class="form-label">
                            å­¦ä¹ ç‡ (Learning Rate)
                            <span class="param-help" title="å­¦ä¹ ç‡å†³å®šå‚æ•°æ›´æ–°çš„æ­¥é•¿ã€‚å¤ªå°ä¼šå¯¼è‡´è®­ç»ƒç¼“æ…¢ï¼Œå¤ªå¤§ä¼šå¯¼è‡´ä¸ç¨³å®šã€‚">â“</span>
                        </label>
                        <div class="input-group">
                            <input type="range" class="form-range" id="learning_rate_range" min="0.0001" max="0.01" step="0.0001" value="0.001" oninput="updateRangeValue('learning_rate', this.value)">
                            <div class="range-value" id="learning_rate_value">0.001</div>
                        </div>
                        <input type="hidden" id="learning_rate" name="learning_rate" value="0.001">
                    </div>
                    
                    <div class="form-group">
                        <label for="epochs" class="form-label">
                        è®­ç»ƒè½®æ•° (Epochs)
                        <span class="param-help" title="è®­ç»ƒè½®æ•°è¡¨ç¤ºæ•´ä¸ªæ•°æ®é›†è¢«å¤„ç†çš„æ¬¡æ•°ã€‚å¢åŠ è½®æ•°å¯èƒ½æé«˜æ€§èƒ½ï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´è¿‡æ‹Ÿåˆã€‚">â“</span>
                    </label>
                    <div class="input-group">
                        <input type="range" class="form-range" id="epochs_range" min="5" max="2000" step="5" value="30" oninput="updateRangeValue('epochs', this.value)">
                        <div class="range-value" id="epochs_value">30</div>
                    </div>
                    <input type="hidden" id="epochs" name="epochs" value="30">
                    </div>
                    
                    <div class="form-group">
                        <label for="optimizer" class="form-label">
                            ä¼˜åŒ–å™¨ (Optimizer)
                            <span class="param-help" title="ä¼˜åŒ–å™¨å†³å®šå¦‚ä½•æ›´æ–°æ¨¡å‹å‚æ•°ã€‚ä¸åŒçš„ä¼˜åŒ–å™¨æœ‰ä¸åŒçš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚">â“</span>
                        </label>
                        <select id="optimizer" name="optimizer" class="form-select">
                            <option value="adam">Adam</option>
                            <option value="sgd">SGD</option>
                        </select>
                        <div class="model-description mt-2">
                            <strong>Adamï¼š</strong> è‡ªé€‚åº”å­¦ä¹ ç‡ä¼˜åŒ–å™¨ï¼Œæ”¶æ•›é€Ÿåº¦å¿«ï¼Œé€‚åˆå¤§å¤šæ•°ä»»åŠ¡<br>
                            <strong>SGDï¼š</strong> éšæœºæ¢¯åº¦ä¸‹é™ï¼Œé…åˆåŠ¨é‡å¯èƒ½åœ¨æŸäº›ä»»åŠ¡ä¸Šè¡¨ç°æ›´å¥½
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æäº¤æŒ‰é’® -->
            <div class="card mt-4">
                <div class="card-body text-center">
                    <button type="submit" class="btn btn-primary btn-lg">
                        ä¿å­˜é…ç½®å¹¶ç»§ç»­
                    </button>
                </div>
            </div>
        </form>
        
        <!-- å‚æ•°å»ºè®® -->
        <div class="card mt-4">
            <div class="card-body">
                <h3>å‚æ•°è°ƒä¼˜å»ºè®®</h3>
                <div class="row">
                    <div class="col-md-6">
                        <h4>åˆå­¦è€…é…ç½®</h4>
                        <ul>
                            <li>æ¨¡å‹ï¼šç®€å•CNN</li>
                            <li>æ‰¹æ¬¡å¤§å°ï¼š32</li>
                            <li>å­¦ä¹ ç‡ï¼š0.001</li>
                            <li>è®­ç»ƒè½®æ•°ï¼š10</li>
                            <li>ä¼˜åŒ–å™¨ï¼šAdam</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h4>è¿›é˜¶é…ç½®</h4>
                        <ul>
                            <li>æ¨¡å‹ï¼šæ”¹è¿›æˆ–é«˜çº§CNN</li>
                            <li>æ‰¹æ¬¡å¤§å°ï¼š64ï¼ˆå¦‚æœGPUå†…å­˜å…è®¸ï¼‰</li>
                            <li>å­¦ä¹ ç‡ï¼š0.0005-0.001</li>
                            <li>è®­ç»ƒè½®æ•°ï¼š20-30</li>
                            <li>ä¼˜åŒ–å™¨ï¼šæ ¹æ®ä»»åŠ¡è°ƒæ•´</li>
                        </ul>
                    </div>
                </div>
                <p class="model-description mt-3">
                    <strong>ğŸ’¡ æç¤ºï¼š</strong> å‚æ•°è°ƒä¼˜æ˜¯ä¸€ä¸ªè¿­ä»£è¿‡ç¨‹ã€‚å»ºè®®å…ˆä½¿ç”¨é»˜è®¤å‚æ•°è®­ç»ƒæ¨¡å‹ï¼Œç„¶åæ ¹æ®è®­ç»ƒç»“æœï¼ˆå¦‚æŸå¤±æ›²çº¿ã€å‡†ç¡®ç‡ç­‰ï¼‰é€æ­¥è°ƒæ•´å‚æ•°ã€‚
                </p>
            </div>
        </div>
    </div>

    <footer class="mt-10 py-5 bg-dark text-white">
        <div class="container text-center">
            <p>&copy; 2023 å›¾åƒè¯†åˆ«å¤§è¯¾è®¾ - æ·±åº¦å­¦ä¹ é¡¹ç›®</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function selectModel(modelType) {
            // ç§»é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.model-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // æ·»åŠ é€‰ä¸­çŠ¶æ€
            document.querySelector(`input[value="${modelType}"]`).parentElement.classList.add('selected');
            document.querySelector(`input[value="${modelType}"]`).checked = true;
        }
        
        function updateRangeValue(inputId, value) {
            // æ›´æ–°æ˜¾ç¤ºå€¼
            document.getElementById(`${inputId}_value`).textContent = value;
            // æ›´æ–°éšè—è¾“å…¥å€¼
            document.getElementById(inputId).value = value;
        }
    </script>
</body>
</html>